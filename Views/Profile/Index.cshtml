@model Capstone_Next_Step.Models.User

<div class="form-container">
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">
            @TempData["SuccessMessage"]
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger">
            @TempData["ErrorMessage"]
        </div>
    }
    
    <!-- Profile Photo (standalone upload form) -->
    <div class="profile-photo-container mb-3">
        <div class="profile-photo" id="profilePhotoPreview">
            @{
                var profileImg = string.IsNullOrEmpty(Model.ProfileImage)
                    ? Context.Session.GetString("ProfileImage")
                    : Model.ProfileImage;
            }
            @if (!string.IsNullOrEmpty(profileImg))
            {
                <img src="@profileImg" alt="Profile" />
            }
            else
            {
                <i class="fas fa-user fa-3x text-muted"></i>
            }
        </div>
        <label for="profileImage" class="profile-photo-upload">
            <i class="fas fa-camera"></i>
        </label>
        <form asp-action="UploadProfileImage" method="post" enctype="multipart/form-data">
            <input type="hidden" name="id" value="@Model.Id" />
            <input type="file" id="profileImage" name="profileImage" accept="image/*" onchange="this.form.submit()" style="display:none" />
        </form>
    </div>

    <form asp-action="UpdateProfile" method="post" id="profileForm">
        <input type="hidden" asp-for="Id" />

        <div class="user-name-display mb-4" id="photoUserName"></div>

        <!-- Personal Information -->
        <div class="section-title">Personal</div>

        <div class="mb-3">
            <label for="fullName" class="form-label">FULL NAME</label>
            <input type="text" asp-for="Name" class="form-control" id="fullName" placeholder="Enter your full name">
        </div>

        <div class="mb-3">
            <label for="phoneNumber" class="form-label">PHONE</label>
            <input type="tel" asp-for="PhoneNamber" class="form-control" id="phoneNumber" placeholder="Enter your phone number">
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">EMAIL</label>
            <input type="email" asp-for="Email" class="form-control" id="email" placeholder="Enter your email">
        </div>

        <div class="mb-3">
            <label for="jobTitle" class="form-label">JOB TITLE</label>
            <input type="text" asp-for="JobTitle" class="form-control" id="jobTitle" placeholder="Enter your job title">
        </div>

        <div class="mb-4">
            <label for="language" class="form-label">LANGUAGE</label>
            <select class="form-select" id="language">
                <option value="english" selected>English</option>
                <option value="spanish">Spanish</option>
                <option value="french">French</option>
                <option value="german">German</option>
                <option value="arabic">Arabic</option>
            </select>
        </div>

        <div class="section-divider"></div>

        <!-- Security -->
        <div class="section-title">Security</div>

        <div class="mb-3">
            <label for="twoFactorAuth" class="form-label">TWO-FACTOR AUTH</label>
            <select class="form-select" id="twoFactorAuth">
                <option value="disabled">Disabled</option>
                <option value="sms">SMS</option>
                <option value="email">Email</option>
                <option value="app">Authenticator App</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="notifications" class="form-label">NOTIFICATIONS</label>
            <select class="form-select" id="notifications">
                <option value="all">All notifications</option>
                <option value="important">Important only</option>
                <option value="none">None</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="dataSharing" class="form-label">DATA SHARING</label>
            <select class="form-select" id="dataSharing">
                <option value="enabled">Enabled</option>
                <option value="limited">Limited</option>
                <option value="disabled">Disabled</option>
            </select>
        </div>

        <div class="d-grid mt-4">
            <button type="submit" class="btn btn-save">Save Changes</button>
        </div>
    </form>
</div>


      
